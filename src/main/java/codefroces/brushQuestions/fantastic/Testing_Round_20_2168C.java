package codefroces.brushQuestions.fantastic;

import java.io.*;
import java.util.*;

/**
 * @author gusixue
 * @description C. Intercepting Butterflies
 * @date 2025/11/4 4:26 ä¸Šåˆ
 *
 * çˆ±ä¸½ä¸æœ‰ä¸€ä¸ªæ•´æ•°ğ‘¥ï¼Œå…¶ä¸­ 1â‰¤ğ‘¥â‰¤2Â¹âµï¼Œå¥¹éœ€è¦å°†å…¶å‘é€ç»™é²å‹ƒï¼ˆæœˆçƒä¸Šçš„ä¸€åå®‡èˆªå‘˜ï¼‰ï¼Œå› ä¸ºè¿™æ˜¯ä»–ä»¬åœ¨æœˆçƒä¸Šçš„ç§˜å¯†é¡¹ç›®çš„ä¸€ä¸ªé‡è¦å‚æ•°ã€‚å¹¸è¿çš„æ˜¯ï¼Œçˆ±ä¸½ä¸æœ‰ä¸€ä¸ªç§˜å¯†å­˜å‚¨è®¾å¤‡ğ‘†ï¼Œå®ƒåŒ…å«é›†åˆ {1,2,â€¦,20} çš„ä¸€ä¸ªä¸ä¸€å®šéç©ºçš„å­é›†ã€‚å¥¹è®¡åˆ’å°†ğ‘†å‘é€ç»™é²å‹ƒã€‚é²å‹ƒçš„ç›®æ ‡æ˜¯ä»…ä½¿ç”¨ğ‘†æ¥æ¢å¤ğ‘¥çš„å€¼ã€‚
 * ç„¶è€Œï¼Œåœ¨çˆ±ä¸½ä¸é€šè¿‡å®‡å®™é£èˆ¹å‘é€é›†åˆğ‘†ä¹‹åï¼Œåœ¨é²å‹ƒæ”¶åˆ°ğ‘†ä¹‹å‰ï¼Œé­”æ³•è´è¶æ‹¦æˆªäº†è¿™è‰˜å®‡å®™é£èˆ¹ï¼å½“é²å‹ƒæœ€ç»ˆæ”¶åˆ°ğ‘†æ—¶ï¼Œå¯èƒ½å‘ç”Ÿäº†ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š
 *     * ä»ğ‘†ä¸­ç§»é™¤äº†ä¸€ä¸ªä»»æ„å…ƒç´ ã€‚è¿™åªæœ‰åœ¨ğ‘†éç©ºæ—¶æ‰èƒ½è¿›è¡Œã€‚
 *     * å‘ğ‘†ä¸­æ·»åŠ äº†ä¸€ä¸ªä»»æ„å…ƒç´ ã€‚æ·»åŠ åä»éœ€æ»¡è¶³ğ‘†âŠ†{1,2,â€¦,20}ã€‚
 *     * ğ‘†ä¿æŒä¸å˜ã€‚
 * è¯·è®¾è®¡ä¸€ä¸ªçˆ±ä¸½ä¸å’Œé²å‹ƒçš„ç­–ç•¥ï¼Œè®©é²å‹ƒæ— è®ºğ‘†å‘ç”Ÿäº†ä»€ä¹ˆæƒ…å†µï¼Œéƒ½èƒ½ç¡®å®šğ‘¥çš„å€¼ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œä½ çš„ä»£ç å°†åœ¨æ¯ä¸ªæµ‹è¯•ä¸Šæ°å¥½è¿è¡Œä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œä½ å°†æ‰®æ¼”çˆ±ä¸½ä¸ï¼›ç¬¬äºŒæ¬¡è¿è¡Œæ—¶ï¼Œä½ å°†æ‰®æ¼”é²å‹ƒã€‚é™¤äº†é›†åˆğ‘†ä¹‹å¤–ï¼Œä¸èƒ½æœ‰ä»»ä½•å…¶ä»–ä¿¡æ¯ä»çˆ±ä¸½ä¸ä¼ é€’ç»™é²å‹ƒã€‚è¦è·å¾— â€œé€šè¿‡â€ çš„åˆ¤å®šï¼Œä½ ç¬¬äºŒæ¬¡è¿è¡Œçš„ä»£ç å¿…é¡»èƒ½å¤Ÿå‡†ç¡®æ¢å¤ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶æ¥æ”¶åˆ°çš„æ•´æ•°ã€‚
 *
 * ç¬¬ä¸€æ¬¡è¿è¡Œ
 * è¾“å…¥
 *     * ç¬¬ä¸€è¡Œè¾“å…¥åŒ…å«å­—ç¬¦ä¸² â€œfirstâ€ã€‚è¿™æ˜¯ä¸ºäº†è®©ä½ çš„ç¨‹åºè¯†åˆ«å‡ºè¿™æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œæ­¤æ—¶å®ƒåº”æ‰®æ¼”çˆ±ä¸½ä¸ã€‚
 *     * ç¬¬äºŒè¡Œè¾“å…¥åŒ…å«æ°å¥½ä¸€ä¸ªæ•´æ•°ğ‘¡ï¼ˆ1â‰¤ğ‘¡â‰¤10â´ï¼‰â€”â€” æµ‹è¯•ç”¨ä¾‹çš„æ•°é‡ã€‚
 *     * ç¬¬ğ‘–ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å”¯ä¸€ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ğ‘¥ï¼ˆ1â‰¤ğ‘¥â‰¤2Â¹âµï¼‰ã€‚
 * è¾“å‡º
 *     * å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡æŒ‰ä»¥ä¸‹æ–¹å¼æ‰“å°ä¸¤è¡Œæ¥å‘é²å‹ƒå‘é€ğ‘†ï¼š
 *     * ç¬¬ä¸€è¡Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ğ‘›ï¼ˆ0â‰¤ğ‘›â‰¤20ï¼‰â€”â€”ğ‘†çš„å¤§å°ã€‚
 *     * ç¬¬äºŒè¡Œè¾“å‡ºğ‘›ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ğ‘†â‚,ğ‘†â‚‚,â€¦,ğ‘†â‚™ï¼ˆ1â‰¤ğ‘†áµ¢â‰¤20ï¼‰ã€‚
 *     * ç‰¹åˆ«åœ°ï¼Œå¦‚æœğ‘›=0ï¼Œä½ å¯ä»¥çœç•¥ç¬¬äºŒè¡Œã€‚ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¾“å‡ºğ‘†çš„å…ƒç´ ï¼Œä½†å®ƒä»¬å¿…é¡»ä¸¤ä¸¤ä¸åŒã€‚
 *     * ç„¶åï¼Œä½ å°†ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæˆ–è€…å¦‚æœå¤„ç†å®Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œä½ çš„ç¨‹åºå¿…é¡»ç»ˆæ­¢ã€‚
 * ç¬¬äºŒæ¬¡è¿è¡Œ
 * è¾“å…¥
 *     * ç¬¬ä¸€è¡Œè¾“å…¥åŒ…å«å­—ç¬¦ä¸² â€œsecondâ€ã€‚è¿™æ˜¯ä¸ºäº†è®©ä½ çš„ç¨‹åºè¯†åˆ«å‡ºè¿™æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œï¼Œæ­¤æ—¶å®ƒåº”æ‰®æ¼”é²å‹ƒã€‚
 *     * ç¬¬äºŒè¡Œè¾“å…¥åŒ…å«æ°å¥½ä¸€ä¸ªæ•´æ•°ğ‘¡ï¼ˆ1â‰¤ğ‘¡â‰¤10â´ï¼‰â€”â€” æµ‹è¯•ç”¨ä¾‹çš„æ•°é‡ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ•°å­—ä¸ç¬¬ä¸€æ¬¡è¿è¡Œè¾“å…¥ä¸­çš„ğ‘¡ç›¸ç­‰ã€‚
 *     * æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ğ‘›â€²ï¼ˆ0â‰¤ğ‘›â€²â‰¤20ï¼‰â€”â€” é²å‹ƒæ”¶åˆ°çš„é›†åˆğ‘†â€²çš„å¤§å°ï¼Œå³å¯èƒ½è¢«ä¿®æ”¹è¿‡çš„ğ‘†ã€‚
 *     * æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬äºŒè¡ŒåŒ…å«ğ‘›ä¸ªæ•´æ•°ğ‘†â‚â€²,ğ‘†â‚‚â€²,â€¦,ğ‘†â‚™â€²ï¼ˆ1â‰¤ğ‘†áµ¢â€²â‰¤20ï¼‰â€”â€” é²å‹ƒæ”¶åˆ°çš„ğ‘†â€²çš„å…ƒç´ ã€‚ğ‘†â€²çš„å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼Œå³ä½¿åŸå§‹çš„ğ‘†ä¸æ˜¯æŒ‰å‡åºæ’åˆ—çš„ã€‚
 *     * è¯·æ³¨æ„ï¼Œç¬¬äºŒæ¬¡è¿è¡Œä¸­çš„æµ‹è¯•ç”¨ä¾‹å¯èƒ½æ˜¯æ‰“ä¹±é¡ºåºçš„ã€‚æ›´å¤šç»†èŠ‚è¯·å‚è§ç¤ºä¾‹è¾“å…¥ã€‚
 * è¾“å‡º
 *     * å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæ‰“å°ä¸€è¡Œï¼Œè¾“å‡ºğ‘¥çš„å€¼ï¼ˆ1â‰¤ğ‘¥â‰¤2Â¹âµï¼‰ã€‚
 */

public class Testing_Round_20_2168C {

    /**
     * é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼šä»…çœ‹äºŒè¿›åˆ¶ä¸‹çš„ 1ï¼Œx-1 èŒƒå›´åœ¨ [0, 2^15-1] å¯çœ‹åš 15 ä½ï¼Œä¸é‡å¤çš„ S å¯çœ‹åš 20 ä½ï¼›S æ·»åŠ /åˆ é™¤ä¸€ä½ï¼Œå¯çœ‹åšç¿»è½¬ä¸€æ¯”ç‰¹çš„å€¼
     * ç„¶å S å‡ºç°æ•°å­—ä»£è¡¨äºŒè¿›åˆ¶ä¸‹ 1 å‡ºç°ï¼šå°† S å‰ 15 ä½å½“åš x-1 çš„å€¼ï¼›ä¸­é—´ 4 ä½ç»Ÿä¸€æˆ æ•°å­—(0-15) å½“åšå‰ 15 ä½æ‰€æœ‰æ•°å­— **å¼‚æˆ–** åçš„ç»“æœï¼›æœ€åä¸€ä½å½“åšä¸­é—´ 4 ä½å‡ºç°çš„æ•°å­— %2
     * ç”±äº S ä»…èƒ½ç¿»è½¬ä¸€æ¬¡ï¼Œå› æ­¤ä¸‰ç±»ä½ç½®ä»…æœ‰ä¸€ä¸ªä½ç½®ä¼šå‡ºé”™ï¼šS` å‰ 15 ä½æ‰€æœ‰æ•°å†æ¬¡ä¸ä¸­é—´ 4 ä½ç»Ÿä¸€æˆçš„æ•°å­—å¼‚æˆ–
     *     ç»“æœä¸º 0 åˆ™é”™è¯¯åœ¨æœ€åä¸€ä½ï¼Œå‰ 15 ä½è·å¾—çš„æ•°å­—æ­£ç¡®
     *     å¦åˆ™æœ€åä¸€ä½ä¸€å®šæ­£ç¡®ï¼Œæ ¹æ®æœ€åä¸€ä½åˆ¤æ–­ä¸­é—´ 4 ä½å‡ºç°æ˜¯å¦æ­£ç¡®ï¼Œä¸æ­£ç¡®åˆ™å‰ 15 ä½è·å¾—çš„æ•°å­—æ­£ç¡®
     *         å¦åˆ™æ ¹æ®ä¸­é—´ 4 ä½å†æ¬¡ **å¼‚æˆ–** å‰ 15 ä½æ‰€æœ‰æ•°å­—ï¼Œç»“æœåœ¨å‰ 15 ä½å‡ºç°è¿‡å°±ä»£è¡¨å¤šåŠ äº†å®ƒã€å¦åˆ™åˆ é™¤äº†å®ƒ
     */
    public static void main(String[] args) throws IOException {
        Scanner sc = new Scanner(System.in);
        String purpose = sc.nextLine();

        if (purpose.equals("first")) {
            int t = sc.nextInt();
            while (t > 0) {
                int x = sc.nextInt();

                int[] res = solveFirst(x);
//                System.out.println(Arrays.toString(res));

                print(res.length);
                printArray(res);

                t--;
            }

        } else {
            int t = sc.nextInt();
            while (t > 0) {
                int n = sc.nextInt();
                int[] s = new int[n];
                for (int i = 0; i < n; i++) {
                    s[i] = sc.nextInt();
                }

                int res = solveSecond(n, s);

                print(res);

                t--;
            }
        }
    }

    private static int[] solveFirst(int x) {
        List<Integer> listRes = new ArrayList<>();

        int xorTotal = 0;
        for (int i = 0; i < 15; i++) {
            if (((x - 1) & (1 << i)) > 0) {
                xorTotal ^= i + 1;
                // S å‰ 15 ä½å½“åš x-1 çš„äºŒè¿›åˆ¶å€¼
                listRes.add(i + 1);
            }
        }
//        System.out.println(xorTotal);

        // ä¸­é—´ 4 ä½ç»Ÿä¸€æˆ æ•°å­—(0-15) å½“åšå‰ 15 ä½æ‰€æœ‰æ•°å­— **å¼‚æˆ–** åçš„ç»“æœ
        int xorCnt = 0;
        for (int i = 0; i < 4; i++) {
            if ((xorTotal & (1 << i)) > 0) {
                listRes.add(i + 16);
                xorCnt++;
            }
        }

        // æœ€åä¸€ä½å½“åšä¸­é—´ 4 ä½å‡ºç°çš„æ•°å­— %2
        if (xorCnt % 2 == 1) {
            listRes.add(20);
        }

        return listRes.stream().mapToInt(Integer::intValue).toArray();
    }

    private static int solveSecond(int n, int[] s) {
        int x = 0;
        int xorTotal = 0;
        int xorTotalMod = 0;
        int xorCnt = 0;
        for (int num : s) {
            if (num <= 15) {
                x += (1 << (num - 1));

            } else if (num < 20) {
                xorTotal += (1 << (num - 16));
                xorCnt++;

            } else {
                xorTotalMod = 1;
            }
        }

        // S` å‰ 15 ä½æ‰€æœ‰æ•°å†æ¬¡ä¸ä¸­é—´ 4 ä½ç»Ÿä¸€æˆçš„æ•°å­—å¼‚æˆ–,ç»“æœä¸º 0 åˆ™é”™è¯¯åœ¨æœ€åä¸€ä½
        int xorTotalTemp = xorTotal;
        for (int num : s) {
            if (num > 15) {
                break;
            }

            xorTotalTemp ^= num;
        }
        if (xorTotalTemp == 0) {
            return x + 1;
        }

        // æ ¹æ®æœ€åä¸€ä½åˆ¤æ–­ä¸­é—´ 4 ä½æ˜¯å¦æ­£ç¡®ï¼Œä¸æ­£ç¡®åˆ™å‰ 15 ä½è·å¾—çš„æ•°å­—æ­£ç¡®
        if (xorCnt % 2 != xorTotalMod) {
            return x + 1;
        }

        // å¦åˆ™æ ¹æ®ä¸­é—´ 4 ä½å†æ¬¡ **å¼‚æˆ–** å‰ 15 ä½æ‰€æœ‰æ•°å­—ï¼Œç»“æœåœ¨å‰ 15 ä½å‡ºç°è¿‡å°±ä»£è¡¨å¤šåŠ äº†å®ƒã€å¦åˆ™åˆ é™¤äº†å®ƒ
        return (x ^ (1 << (xorTotalTemp - 1))) + 1;
    }

    static int MOD = 1_000_000_007;
    static int INF = (int) 1e9;
    static long fact[];
    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    static BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));
    static StringTokenizer st;

    static String nextToken() throws IOException {
        if (st == null || !st.hasMoreTokens()) {
            st = new StringTokenizer(br.readLine());
        }
        return st.nextToken();
    }

    static void printArray(int arr[]) throws IOException {
        StringBuilder sb = new StringBuilder();
        for (int e : arr) {
            sb.append(e + " ");
        }
        bw.write(sb.toString().trim());
        bw.newLine();
        bw.flush();
    }

    static void print(Object o) throws IOException {
        bw.write(o.toString());
        bw.newLine();
        bw.flush();
    }
}
